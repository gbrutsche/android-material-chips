apply plugin: 'com.android.library'

android {
    compileSdkVersion rootProject.ext.compileSdkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion

    flavorDimensions "dimension"

    defaultConfig {
        minSdkVersion rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion
        versionCode 4
        versionName "1.2.0"
        setProperty("archivesBaseName", "android-material-chips-$versionName")
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    implementation "com.makeramen:roundedimageview:$rootProject.ext.roundedImageViewVersion"
    implementation "com.squareup.picasso:picasso:$rootProject.ext.picassoVersion"
    implementation "androidx.appcompat:appcompat:$rootProject.ext.androidXVersion"
    implementation "com.rengwuxian.materialedittext:library:$rootProject.ext.materialEditTextVersion"

    // FIX: Fixes some other lib using v2.1.0 of this lib and causing support version mismatch.
    // Remove when updating libs as it might not be needed anymore.
    implementation "androidx.exifinterface:exifinterface:$rootProject.ext.androidXVersion"

    // JUnit
    testImplementation "junit:junit:$rootProject.ext.jUnitVersion"
    androidTestImplementation "junit:junit:$rootProject.ext.jUnitVersion"
    // Testing
    androidTestImplementation "androidx.test:runner:$rootProject.ext.androidXSupportTestVersion"
    androidTestImplementation "androidx.test:rules:$rootProject.ext.androidXSupportTestVersion"
}

task sourcesJar(type: Jar) {
    from android.sourceSets.main.java.srcDirs
    classifier = 'sources'
}

task javadoc(type: Javadoc) {
    source = android.sourceSets.main.java.srcDirs
    classpath += project.files(android.getBootClasspath().join(File.pathSeparator))
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

artifacts {
    archives javadocJar
    archives sourcesJar
}